{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import api from'../../services/api';// Async thunks\nexport const fetchWallet=createAsyncThunk('wallet/fetchWallet',async(_,_ref)=>{let{rejectWithValue}=_ref;try{const response=await api.get('/payments/wallet');return response.data.wallet;}catch(error){var _error$response,_error$response$data;return rejectWithValue(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to fetch wallet');}});export const fetchTransactions=createAsyncThunk('wallet/fetchTransactions',async function(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};let{rejectWithValue}=arguments.length>1?arguments[1]:undefined;try{const response=await api.get('/payments/transactions',{params});return response.data;}catch(error){var _error$response2,_error$response2$data;return rejectWithValue(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Failed to fetch transactions');}});export const requestWithdrawal=createAsyncThunk('wallet/requestWithdrawal',async(withdrawalData,_ref2)=>{let{rejectWithValue}=_ref2;try{const response=await api.post('/payments/withdraw',withdrawalData);return response.data.transaction;}catch(error){var _error$response3,_error$response3$data;return rejectWithValue(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Failed to request withdrawal');}});export const depositFunds=createAsyncThunk('wallet/depositFunds',async(depositData,_ref3)=>{let{rejectWithValue}=_ref3;try{const response=await api.post('/payments/deposit',depositData);return response.data.transaction;}catch(error){var _error$response4,_error$response4$data;return rejectWithValue(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Failed to deposit funds');}});const initialState={wallet:{balance:0,pendingEarnings:0,totalEarned:0,totalSpent:0},transactions:[],pagination:{currentPage:1,totalPages:1,totalTransactions:0,hasNext:false,hasPrev:false},loading:false,error:null};const walletSlice=createSlice({name:'wallet',initialState,reducers:{clearError:state=>{state.error=null;},updateBalance:(state,action)=>{state.wallet.balance=action.payload;},addTransaction:(state,action)=>{state.transactions.unshift(action.payload);}},extraReducers:builder=>{builder// Fetch Wallet\n.addCase(fetchWallet.pending,state=>{state.loading=true;state.error=null;}).addCase(fetchWallet.fulfilled,(state,action)=>{state.loading=false;state.wallet=action.payload;}).addCase(fetchWallet.rejected,(state,action)=>{state.loading=false;state.error=action.payload;})// Fetch Transactions\n.addCase(fetchTransactions.pending,state=>{state.loading=true;state.error=null;}).addCase(fetchTransactions.fulfilled,(state,action)=>{state.loading=false;state.transactions=action.payload.transactions;state.pagination=action.payload.pagination;}).addCase(fetchTransactions.rejected,(state,action)=>{state.loading=false;state.error=action.payload;})// Request Withdrawal\n.addCase(requestWithdrawal.pending,state=>{state.loading=true;state.error=null;}).addCase(requestWithdrawal.fulfilled,(state,action)=>{state.loading=false;state.transactions.unshift(action.payload);// Update balance (withdrawal amount is negative)\nstate.wallet.balance+=action.payload.amount;}).addCase(requestWithdrawal.rejected,(state,action)=>{state.loading=false;state.error=action.payload;})// Deposit Funds\n.addCase(depositFunds.pending,state=>{state.loading=true;state.error=null;}).addCase(depositFunds.fulfilled,(state,action)=>{state.loading=false;state.transactions.unshift(action.payload);state.wallet.balance+=action.payload.amount;}).addCase(depositFunds.rejected,(state,action)=>{state.loading=false;state.error=action.payload;});}});export const{clearError,updateBalance,addTransaction}=walletSlice.actions;export default walletSlice.reducer;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}