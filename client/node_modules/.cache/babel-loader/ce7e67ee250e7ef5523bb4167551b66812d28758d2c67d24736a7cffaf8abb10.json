{"ast":null,"code":"import _objectSpread from\"C:/Users/HP/Desktop/TPAY/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{UserGroupIcon,MagnifyingGlassIcon,FunnelIcon}from'@heroicons/react/24/outline';import api from'../../services/api';import LoadingSpinner from'../../components/ui/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UserManagement=()=>{const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[filters,setFilters]=useState({search:'',role:'',status:'',page:1,limit:20});useEffect(()=>{fetchUsers();},[filters]);const fetchUsers=async()=>{try{setLoading(true);const response=await api.get('/admin/users',{params:filters});setUsers(response.data.users||[]);}catch(error){console.error('Failed to fetch users:',error);}finally{setLoading(false);}};const handleStatusUpdate=async(userId,newStatus)=>{try{await api.put(\"/admin/users/\".concat(userId),{status:newStatus});fetchUsers();// Refresh the list\n}catch(error){console.error('Failed to update user status:',error);}};const getStatusBadge=status=>{const badges={active:'badge-success',suspended:'badge-warning',banned:'badge-error'};return badges[status]||'badge-info';};const getRoleBadge=role=>{const badges={worker:'bg-blue-100 text-blue-800',employer:'bg-purple-100 text-purple-800',admin:'bg-red-100 text-red-800'};return badges[role]||'bg-gray-100 text-gray-800';};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"User Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"Manage user accounts, roles, and permissions.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card p-6 mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search users...\",value:filters.search,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{search:e.target.value})),className:\"input-field pl-10\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:filters.role,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{role:e.target.value})),className:\"input-field\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Roles\"}),/*#__PURE__*/_jsx(\"option\",{value:\"worker\",children:\"Workers\"}),/*#__PURE__*/_jsx(\"option\",{value:\"employer\",children:\"Employers\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admins\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:filters.status,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{status:e.target.value})),className:\"input-field\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"suspended\",children:\"Suspended\"}),/*#__PURE__*/_jsx(\"option\",{value:\"banned\",children:\"Banned\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFilters({search:'',role:'',status:'',page:1,limit:20}),className:\"btn-outline flex items-center justify-center\",children:[/*#__PURE__*/_jsx(FunnelIcon,{className:\"h-4 w-4 mr-2\"}),\"Clear Filters\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card overflow-hidden\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-12\",children:/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\"})}):users.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(UserGroupIcon,{className:\"h-12 w-12 text-gray-300 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No users found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Try adjusting your search criteria.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Joined\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Stats\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:users.map(user=>{var _user$firstName,_user$lastName,_user$workerStats,_user$workerStats2,_user$workerStats2$ap,_user$employerStats,_user$employerStats2,_user$employerStats2$;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 h-10 w-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-primary-600\",children:[(_user$firstName=user.firstName)===null||_user$firstName===void 0?void 0:_user$firstName[0],(_user$lastName=user.lastName)===null||_user$lastName===void 0?void 0:_user$lastName[0]]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-gray-900\",children:[user.firstName,\" \",user.lastName]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:user.email})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(getRoleBadge(user.role),\" capitalize\"),children:user.role})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(getStatusBadge(user.status),\" capitalize\"),children:user.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:new Date(user.createdAt).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[user.role==='worker'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Tasks: \",((_user$workerStats=user.workerStats)===null||_user$workerStats===void 0?void 0:_user$workerStats.tasksCompleted)||0]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Rate: \",((_user$workerStats2=user.workerStats)===null||_user$workerStats2===void 0?void 0:(_user$workerStats2$ap=_user$workerStats2.approvalRate)===null||_user$workerStats2$ap===void 0?void 0:_user$workerStats2$ap.toFixed(1))||'100.0',\"%\"]})]}),user.role==='employer'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Tasks: \",((_user$employerStats=user.employerStats)===null||_user$employerStats===void 0?void 0:_user$employerStats.tasksPosted)||0]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Spent: $\",((_user$employerStats2=user.employerStats)===null||_user$employerStats2===void 0?void 0:(_user$employerStats2$=_user$employerStats2.totalSpent)===null||_user$employerStats2$===void 0?void 0:_user$employerStats2$.toFixed(2))||'0.00']})]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[user.status==='active'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStatusUpdate(user.id,'suspended'),className:\"text-yellow-600 hover:text-yellow-900\",children:\"Suspend\"}),user.status==='suspended'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStatusUpdate(user.id,'active'),className:\"text-green-600 hover:text-green-900\",children:\"Activate\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStatusUpdate(user.id,'banned'),className:\"text-red-600 hover:text-red-900\",children:\"Ban\"})]}),user.status==='banned'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStatusUpdate(user.id,'active'),className:\"text-green-600 hover:text-green-900\",children:\"Unban\"})]})})]},user.id);})})]})})})]})});};export default UserManagement;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}