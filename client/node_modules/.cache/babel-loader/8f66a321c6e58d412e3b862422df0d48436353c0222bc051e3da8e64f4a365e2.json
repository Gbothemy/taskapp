{"ast":null,"code":"import _objectSpread from\"C:/Users/HP/Desktop/TPAY/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import{MagnifyingGlassIcon,FunnelIcon,EyeIcon,ClockIcon,CurrencyDollarIcon}from'@heroicons/react/24/outline';import{fetchTasks,setFilters}from'../../store/slices/taskSlice';import LoadingSpinner from'../../components/ui/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TaskBrowser=()=>{const dispatch=useDispatch();const{tasks,pagination,filters,loading}=useSelector(state=>state.tasks);const[showFilters,setShowFilters]=useState(false);useEffect(()=>{dispatch(fetchTasks(filters));},[dispatch,filters]);const handleFilterChange=(key,value)=>{dispatch(setFilters(_objectSpread(_objectSpread({},filters),{},{[key]:value})));};const handleSearch=e=>{e.preventDefault();dispatch(fetchTasks(filters));};const categories=[{value:'',label:'All Categories'},{value:'data-entry',label:'Data Entry'},{value:'content',label:'Content Creation'},{value:'review',label:'Review & Feedback'},{value:'research',label:'Research'},{value:'testing',label:'Testing'},{value:'design',label:'Design'},{value:'other',label:'Other'}];const sortOptions=[{value:'createdAt',label:'Newest First'},{value:'payoutPerTask',label:'Highest Pay'},{value:'deadline',label:'Deadline'}];const getCategoryColor=category=>{const colors={'data-entry':'bg-blue-100 text-blue-800','content':'bg-purple-100 text-purple-800','review':'bg-green-100 text-green-800','research':'bg-yellow-100 text-yellow-800','testing':'bg-red-100 text-red-800','design':'bg-pink-100 text-pink-800','other':'bg-gray-100 text-gray-800'};return colors[category]||'bg-gray-100 text-gray-800';};const formatDeadline=deadline=>{const date=new Date(deadline);const now=new Date();const diffTime=date-now;const diffDays=Math.ceil(diffTime/(1000*60*60*24));if(diffDays<0)return'Expired';if(diffDays===0)return'Today';if(diffDays===1)return'Tomorrow';return\"\".concat(diffDays,\" days\");};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Browse Tasks\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"Find tasks that match your skills and start earning money today.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,className:\"flex flex-col lg:flex-row gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search tasks...\",value:filters.search,onChange:e=>handleFilterChange('search',e.target.value),className:\"input-field pl-10\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsx(\"select\",{value:filters.category,onChange:e=>handleFilterChange('category',e.target.value),className:\"input-field\",children:categories.map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat.value,children:cat.label},cat.value))}),/*#__PURE__*/_jsx(\"select\",{value:filters.sortBy,onChange:e=>handleFilterChange('sortBy',e.target.value),className:\"input-field\",children:sortOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setShowFilters(!showFilters),className:\"btn-outline flex items-center\",children:[/*#__PURE__*/_jsx(FunnelIcon,{className:\"h-4 w-4 mr-2\"}),\"Filters\"]})]})]}),showFilters&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Min Payout\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"$0\",value:filters.minPayout,onChange:e=>handleFilterChange('minPayout',e.target.value),className:\"input-field\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Max Payout\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"$1000\",value:filters.maxPayout,onChange:e=>handleFilterChange('maxPayout',e.target.value),className:\"input-field\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Sort Order\"}),/*#__PURE__*/_jsxs(\"select\",{value:filters.sortOrder,onChange:e=>handleFilterChange('sortOrder',e.target.value),className:\"input-field\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"desc\",children:\"Descending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"asc\",children:\"Ascending\"})]})]})]})})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-12\",children:/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8\",children:tasks.map(task=>/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6 hover:shadow-lg transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(getCategoryColor(task.category)),children:task.category.replace('-',' ')}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-bold text-primary-600\",children:[\"$\",task.payoutPerTask]})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:task.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-4 line-clamp-3\",children:task.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm text-gray-500 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-4 w-4 mr-1\"}),formatDeadline(task.deadline)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-4 w-4 mr-1\"}),task.totalTasksNeeded-task.completedTasks,\" remaining\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[\"Proof: \",task.requiredProofType]}),/*#__PURE__*/_jsxs(Link,{to:\"/tasks/\".concat(task.id),className:\"btn-primary text-sm flex items-center\",children:[/*#__PURE__*/_jsx(EyeIcon,{className:\"h-4 w-4 mr-1\"}),\"View Details\"]})]})]},task.id))}),pagination.totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-700\",children:[\"Showing \",(pagination.currentPage-1)*20+1,\" to\",' ',Math.min(pagination.currentPage*20,pagination.totalTasks),\" of\",' ',pagination.totalTasks,\" tasks\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange('page',pagination.currentPage-1),disabled:!pagination.hasPrev,className:\"btn-outline disabled:opacity-50 disabled:cursor-not-allowed\",children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"px-4 py-2 text-sm text-gray-700\",children:[\"Page \",pagination.currentPage,\" of \",pagination.totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange('page',pagination.currentPage+1),disabled:!pagination.hasNext,className:\"btn-outline disabled:opacity-50 disabled:cursor-not-allowed\",children:\"Next\"})]})]}),tasks.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 mb-4\",children:/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"h-12 w-12 mx-auto\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No tasks found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Try adjusting your search criteria or check back later for new tasks.\"})]})]})]})});};export default TaskBrowser;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}