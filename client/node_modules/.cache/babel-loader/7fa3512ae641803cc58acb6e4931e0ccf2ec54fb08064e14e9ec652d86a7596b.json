{"ast":null,"code":"import _objectSpread from\"C:/Users/HP/Desktop/TPAY/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{useForm}from'react-hook-form';import{EyeIcon,EyeSlashIcon}from'@heroicons/react/24/outline';import{login,clearError}from'../../store/slices/authSlice';import LoadingSpinner from'../../components/ui/LoadingSpinner';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Login=()=>{var _location$state,_location$state$from;const[showPassword,setShowPassword]=useState(false);const{loading,error}=useSelector(state=>state.auth);const dispatch=useDispatch();const navigate=useNavigate();const location=useLocation();const from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||'/dashboard';const{register,handleSubmit,formState:{errors}}=useForm();useEffect(()=>{dispatch(clearError());},[dispatch]);useEffect(()=>{if(error){toast.error(error);}},[error]);const onSubmit=async data=>{try{await dispatch(login(data)).unwrap();toast.success('Login successful!');navigate(from,{replace:true});}catch(error){// Error is handled by the error state and toast above\n}};const demoAccounts=[{email:'worker@taskapp.com',password:'worker123',role:'Worker'},{email:'employer@taskapp.com',password:'employer123',role:'Employer'},{email:'admin@taskapp.com',password:'admin123',role:'Admin'}];const handleDemoLogin=(email,password)=>{dispatch(login({email,password}));};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-primary-500 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-white font-bold\",children:\"\\u2713\\u2713\\u2713\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-gray-900\",children:\"TaskApp\"})]})}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-center text-3xl font-extrabold text-gray-900\",children:\"Sign in to your account\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-center text-sm text-gray-600\",children:[\"Or\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"font-medium text-primary-600 hover:text-primary-500\",children:\"create a new account\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-blue-900 mb-2\",children:\"Demo Accounts\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:demoAccounts.map((account,index)=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleDemoLogin(account.email,account.password),className:\"w-full text-left px-3 py-2 text-sm bg-white border border-blue-200 rounded hover:bg-blue-50 transition-colors\",disabled:loading,children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-blue-900\",children:account.role}),/*#__PURE__*/_jsx(\"div\",{className:\"text-blue-600 text-xs\",children:account.email})]},index))})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-8 space-y-6\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-gray-700\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register('email',{required:'Email is required',pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,message:'Invalid email address'}})),{},{type:\"email\",className:\"input-field mt-1\",placeholder:\"Enter your email\"})),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.email.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 relative\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register('password',{required:'Password is required'})),{},{type:showPassword?'text':'password',className:\"input-field pr-10\",placeholder:\"Enter your password\"})),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"absolute inset-y-0 right-0 pr-3 flex items-center\",onClick:()=>setShowPassword(!showPassword),children:showPassword?/*#__PURE__*/_jsx(EyeSlashIcon,{className:\"h-5 w-5 text-gray-400\"}):/*#__PURE__*/_jsx(EyeIcon,{className:\"h-5 w-5 text-gray-400\"})})]}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.password.message})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",className:\"font-medium text-primary-600 hover:text-primary-500\",children:\"Forgot your password?\"})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full btn-primary flex justify-center items-center\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(LoadingSpinner,{size:\"sm\",className:\"mr-2\"}),\"Signing in...\"]}):'Sign in'})})]})]})});};export default Login;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}