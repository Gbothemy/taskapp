{"ast":null,"code":"import React,{useEffect,useRef}from'react';import{useSelector,useDispatch}from'react-redux';import{formatDistanceToNow}from'date-fns';import{CheckIcon,XMarkIcon,InformationCircleIcon,ExclamationTriangleIcon,CheckCircleIcon}from'@heroicons/react/24/outline';import{markAsRead,markAllAsRead,removeNotification,clearAllNotifications}from'../../store/slices/notificationSlice';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NotificationDropdown=_ref=>{let{onClose}=_ref;const{notifications,unreadCount}=useSelector(state=>state.notifications);const dispatch=useDispatch();const dropdownRef=useRef(null);useEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){onClose();}};document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[onClose]);const getNotificationIcon=type=>{switch(type){case'success':return/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-5 w-5 text-green-500\"});case'error':return/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-5 w-5 text-red-500\"});case'warning':return/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-5 w-5 text-yellow-500\"});default:return/*#__PURE__*/_jsx(InformationCircleIcon,{className:\"h-5 w-5 text-blue-500\"});}};const handleMarkAsRead=notificationId=>{dispatch(markAsRead(notificationId));};const handleRemove=notificationId=>{dispatch(removeNotification(notificationId));};const handleMarkAllAsRead=()=>{dispatch(markAllAsRead());};const handleClearAll=()=>{dispatch(clearAllNotifications());};return/*#__PURE__*/_jsxs(\"div\",{ref:dropdownRef,className:\"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50 max-h-96 overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 border-b border-gray-200 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-semibold text-gray-900\",children:[\"Notifications \",unreadCount>0&&\"(\".concat(unreadCount,\")\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[unreadCount>0&&/*#__PURE__*/_jsx(\"button\",{onClick:handleMarkAllAsRead,className:\"text-xs text-primary-600 hover:text-primary-700\",children:\"Mark all read\"}),notifications.length>0&&/*#__PURE__*/_jsx(\"button\",{onClick:handleClearAll,className:\"text-xs text-gray-500 hover:text-gray-700\",children:\"Clear all\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-80 overflow-y-auto\",children:notifications.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-8 text-center text-gray-500\",children:[/*#__PURE__*/_jsx(InformationCircleIcon,{className:\"h-8 w-8 mx-auto mb-2 text-gray-300\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"No notifications yet\"})]}):notifications.map(notification=>/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3 border-b border-gray-100 hover:bg-gray-50 \".concat(!notification.read?'bg-blue-50':''),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 mt-0.5\",children:getNotificationIcon(notification.type)}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 min-w-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:notification.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:notification.message}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400 mt-1\",children:formatDistanceToNow(new Date(notification.timestamp),{addSuffix:true})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 ml-2\",children:[!notification.read&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleMarkAsRead(notification.id),className:\"p-1 text-gray-400 hover:text-gray-600\",title:\"Mark as read\",children:/*#__PURE__*/_jsx(CheckIcon,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemove(notification.id),className:\"p-1 text-gray-400 hover:text-gray-600\",title:\"Remove\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-4 w-4\"})})]})]})})]})},notification.id))})]});};export default NotificationDropdown;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}