{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import{CurrencyDollarIcon,ClockIcon,CheckCircleIcon,StarIcon,ArrowTrendingUpIcon,EyeIcon}from'@heroicons/react/24/outline';import api from'../../services/api';import LoadingSpinner from'../../components/ui/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WorkerDashboard=()=>{var _stats$totalEarnings,_stats$todayEarnings,_stats$approvalRate,_stats$pendingEarning;const{user}=useSelector(state=>state.auth);const dispatch=useDispatch();const[stats,setStats]=React.useState(null);const[recentSubmissions,setRecentSubmissions]=React.useState([]);const[availableTasks,setAvailableTasks]=React.useState([]);const[loading,setLoading]=React.useState(true);useEffect(()=>{const fetchDashboardData=async()=>{try{const[statsRes,submissionsRes,tasksRes]=await Promise.all([api.get('/users/dashboard/stats'),api.get('/tasks/my/submissions?limit=5'),api.get('/tasks?limit=6')]);setStats(statsRes.data.stats);setRecentSubmissions(submissionsRes.data.submissions||[]);setAvailableTasks(tasksRes.data.tasks||[]);}catch(error){console.error('Failed to fetch dashboard data:',error);}finally{setLoading(false);}};fetchDashboardData();},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\"})});}const statCards=[{title:'Total Earnings',value:\"$\".concat((stats===null||stats===void 0?void 0:(_stats$totalEarnings=stats.totalEarnings)===null||_stats$totalEarnings===void 0?void 0:_stats$totalEarnings.toFixed(2))||'0.00'),icon:CurrencyDollarIcon,color:'text-green-600',bgColor:'bg-green-100'},{title:'Today\\'s Earnings',value:\"$\".concat((stats===null||stats===void 0?void 0:(_stats$todayEarnings=stats.todayEarnings)===null||_stats$todayEarnings===void 0?void 0:_stats$todayEarnings.toFixed(2))||'0.00'),icon:ArrowTrendingUpIcon,color:'text-blue-600',bgColor:'bg-blue-100'},{title:'Pending Tasks',value:(stats===null||stats===void 0?void 0:stats.pendingTasks)||0,icon:ClockIcon,color:'text-yellow-600',bgColor:'bg-yellow-100'},{title:'Completed Tasks',value:(stats===null||stats===void 0?void 0:stats.tasksCompleted)||0,icon:CheckCircleIcon,color:'text-primary-600',bgColor:'bg-primary-100'}];const getStatusBadge=status=>{const badges={pending:'badge-warning',approved:'badge-success',rejected:'badge-error'};return badges[status]||'badge-info';};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:[\"Welcome back, \",user===null||user===void 0?void 0:user.firstName,\"!\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"Here's your task completion overview and earnings summary.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\",children:statCards.map((stat,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-lg \".concat(stat.bgColor),children:/*#__PURE__*/_jsx(stat.icon,{className:\"h-6 w-6 \".concat(stat.color)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:stat.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stat.value})]})]})},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Worker Progress\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(StarIcon,{className:\"h-5 w-5 text-yellow-400 fill-current\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium\",children:[\"Level \",(stats===null||stats===void 0?void 0:stats.level)||1]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-primary-600\",children:[(stats===null||stats===void 0?void 0:(_stats$approvalRate=stats.approvalRate)===null||_stats$approvalRate===void 0?void 0:_stats$approvalRate.toFixed(1))||'100.0',\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Approval Rate\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-secondary-600\",children:(stats===null||stats===void 0?void 0:stats.tasksCompleted)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Tasks Completed\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-blue-600\",children:[\"$\",(stats===null||stats===void 0?void 0:(_stats$pendingEarning=stats.pendingEarnings)===null||_stats$pendingEarning===void 0?void 0:_stats$pendingEarning.toFixed(2))||'0.00']}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Pending Earnings\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Recent Submissions\"}),/*#__PURE__*/_jsx(Link,{to:\"/my-submissions\",className:\"text-primary-600 hover:text-primary-700 text-sm font-medium\",children:\"View all\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:recentSubmissions.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-4\",children:\"No submissions yet\"}):recentSubmissions.map(submission=>{var _submission$task,_submission$payoutDet,_submission$payoutDet2;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900\",children:((_submission$task=submission.task)===null||_submission$task===void 0?void 0:_submission$task.title)||'Task'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Submitted \",new Date(submission.submittedAt).toLocaleDateString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(getStatusBadge(submission.status)),children:submission.status}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-gray-900\",children:[\"$\",((_submission$payoutDet=submission.payoutDetails)===null||_submission$payoutDet===void 0?void 0:(_submission$payoutDet2=_submission$payoutDet.workerEarning)===null||_submission$payoutDet2===void 0?void 0:_submission$payoutDet2.toFixed(2))||'0.00']})]})]},submission.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Available Tasks\"}),/*#__PURE__*/_jsx(Link,{to:\"/tasks\",className:\"text-primary-600 hover:text-primary-700 text-sm font-medium\",children:\"Browse all\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:availableTasks.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-4\",children:\"No tasks available\"}):availableTasks.slice(0,4).map(task=>/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900\",children:task.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 capitalize\",children:task.category})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-bold text-primary-600\",children:[\"$\",task.payoutPerTask]}),/*#__PURE__*/_jsx(Link,{to:\"/tasks/\".concat(task.id),className:\"p-1 text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(EyeIcon,{className:\"h-4 w-4\"})})]})]})},task.id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/tasks\",className:\"card p-6 hover:shadow-lg transition-shadow text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(ClockIcon,{className:\"h-6 w-6 text-primary-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-2\",children:\"Browse Tasks\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Find new tasks to complete and earn money\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/wallet\",className:\"card p-6 hover:shadow-lg transition-shadow text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-6 w-6 text-green-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-2\",children:\"Manage Wallet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"View balance and withdraw earnings\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/profile\",className:\"card p-6 hover:shadow-lg transition-shadow text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(StarIcon,{className:\"h-6 w-6 text-blue-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-2\",children:\"Update Profile\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Improve your worker profile and stats\"})]})]})]})});};export default WorkerDashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}